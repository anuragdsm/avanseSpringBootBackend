<!DOCTYPE html>
<html lang="en" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="_layout">
<head>
<body id="page-top">
	<!-- Begin Page Content -->
	<div class="container-fluid">
	<!-- Page Heading -->
		<div class="d-sm-flex align-items-center justify-content-between mb-4">
			<h1 class="h3 mb-0 text-gray-800">Images</h1>
			<a href="#"
				class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i
				class="fas fa-download fa-sm text-white-50"></i> Generate Report</a>
		</div>
		<!-- Content Row -->
		<div class="row">
			<div class="container-fluid">
				<a th:href="@{/admin/universities/add}" style="margin: 20px 0"
					class="btn btn-primary">Add New Image</a>
				<table class="table">
					<thead class="thead-light">
						<tr>
							<th scope="col">SN</th>
							<th scope="col">Image Name</th>
							<th scope="col">Preview</th>
							<th scope="col">Alt-Tag</th>

							<th scope="col">Link</th>
							<th scope="col">Dimensions</th>

							<th scope="col">Size</th>
							<th scope="col">Uploaded on</th>
							
							<th scope="col">Update</th>
							<th scope="col">Status</th>
							<th scope="col">Delete</th>

						</tr>
					</thead>
					<tbody>

						<tr th:each="picture, iStat : ${pictures}">
							<th scope="row" th:text="${iStat.index + 1}">1</th>
							<td th:text="${picture.name}">my image</td>
							<td><img src="" height="100px" width="100px"
								th:src="@{${'/images/pageImages/' + picture.fileName}}"></td>

							<td th:text="${picture.altTag}">imgAltTag</td>
							<td th:text="${university.establishedYear}">2002</td>

							<td th:text="${university.description}">University
								Description</td>
							<td th:text="${university.accomodation}">Accomodadtion</td>

							<td><a href=""
								th:href="@{/admin/university/delete/{id}(id=${university.id})}"
								class="btn btn-primary">Edit Courses</a></td>

							<td><a href=""
								th:href="@{/admin/university/update/{id}(id=${university.id})}"
								class="btn btn-warning">Update</a></td>


							<td>
								<div class="custom-control custom-switch"
									th:onclick="'toggleUniversityStatus('+${university.id}+')'">
									<input th:inline="text" type="checkbox"
										th:if="${university.isUniversityActive==true}" checked
										class="custom-control-input"
										th:id="'customSwitch'+${university.id}"> <input
										type="checkbox" th:if="${university.isUniversityActive==false}"
										class="custom-control-input"
										th:id="'customSwitch'+${university.id}"> <label
										class="custom-control-label"
										th:for="'customSwitch'+${university.id}"><span
										th:id="'universityStatus'+${university.id}"
										th:text="${university.isUniversityActive==true ?'University Active':'University Inactive'}"></span></label>
								</div>
							</td>



							<td><a href=""
								th:href="@{/admin/university/delete/{id}(id=${university.id})}"
								class="btn btn-danger">Delete</a></td>
						</tr>

					</tbody>
				</table>
			</div>

		</div>


		<!-- Content Row -->


	</div>
	<!-- End of Content Wrapper -->

	<!-- Bootstrap core JavaScript-->
	<script src="/vendor/jquery/jquery.min.js"></script>
	<script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

	<!-- Core plugin JavaScript-->
	<script src="/vendor/jquery-easing/jquery.easing.min.js"></script>

	<!-- Custom scripts for all pages-->
	<script src="/js/sb-admin-2.min.js"></script>



	<script th:inline="javascript" type="text/javascript">
		let contextPath = 'http://localhost:8080';

		function toggleUniversityStatus(id) {
			console.log('toggling id = ' + id);

			let customSwitch = 'customSwitch' + id;

			console.log(document.getElementById(customSwitch));

			console.log(document.getElementById(customSwitch).checked);

			if (document.getElementById(customSwitch).checked == true
					|| document.getElementById(customSwitch).checked == null) {

				document.getElementById(customSwitch).checked = false;

				/* deactivate in controller */
				console.log('Deactivating..');
				
				let http = new XMLHttpRequest();
				let url = contextPath + '/' + 'admin/' 
						+ 'activateDeactivateUniversity' + '/' + id + '/'
						+ 'DeactivateUniversity';
				
				http.open("GET", url, false);
				http.send(null);
				console.log(http.responseText);
				document.getElementById('universityStatus' + id).innerHTML = 'University Inactive';
			}

			else {

				document.getElementById(customSwitch).checked = true;
				let http = new XMLHttpRequest();
				let url = contextPath + '/' + 'admin/'
						+ 'activateDeactivateUniversity' + '/' + id + '/'
						+ 'ActivateUniversity';
				console.log('Activating..')
				http.open("GET", url, false);
				http.send(null);
				console.log(http.responseText);
				document.getElementById('universityStatus' + id).innerHTML = 'University Active';
			}

		}
	</script>

</body>

</html>